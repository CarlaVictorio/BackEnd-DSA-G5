<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>LogIn</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
        body {
            background-image: url('fondo.png');
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-size: 100% 100%;
        }
    </style>
    <script>
       $(document).ready(function(){
          $('#buttonLogIn').click(function() {
            var dataBody=
            {
                nombre: $("#userLogIn").val(),
                password: $("#passLogIn").val(),
            }
            var URL = "/dsaApp/jugador/Login";
            $.post(
            {
                url: URL,
                data: JSON.stringify(dataBody),
                contentType: 'application/json; charset=utf-8'
            })
                .done(function(data, status){
                    var index = "index.html";
                    $(location).attr('href',index);
                    localStorage.setItem('Nombre',$("#userLogIn").val())
                })
                .fail(function(xhr, err){
                    alert("Usuario o contraseña incorrectos");
                    location.reload();
                })
          });
      });
      $(document).ready(function(){
          $('#buttonGuardar').click(function() {
            var dataBody=
            {
                nombre: $("#userRegister").val(),
                password: $("#passRegister").val(),
                email: $("#emailRegister").val(),
                pais: $("#paisRegister").val(),
            }
            var URL = "/dsaApp/jugador/Register";
            $.post(
            {
                url: URL,
                data: JSON.stringify(dataBody),
                contentType: 'application/json; charset=utf-8'
            })
                .done(function(data, status){
                    alert("Usuario registrado");
                    $("#userRegister").empty();
                    $("#passRegister").empty();
                })
                .fail(function(xhr, err){
                    alert("Assegurate de introducir todos los campos, si es así usuario o contraseña ya existente");
                })
          });
      });

    </script>
</head>
<body>

<div class="col-sm-4"></div>
<div class="col-md-4 container p-3 my-3 bg-light text-center">
    <h1>Cook with me</h1>
  <div class="row">
      <p>    Nombre de usuario: <input type="text" id="userLogIn"></p>
      <p>    Contraseña: <input type="password" id="passLogIn"></p>
      <button id="buttonLogIn" class="btn btn-info" >Log In</button>
      <p>    ¿No estas registrado? Registrate </p>
      <button type="buttonRegister" class="btn btn-info" data-toggle="modal" data-target="#myModal">Register</button>
      <div class="modal fade" id="myModal">
        <div class="modal-dialog modal-xl">
          <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
              <h4 class="modal-title">Register</h4>
              <button type="cerrar" class="close" data-dismiss="modal">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
                <div class="was-validated">
                    <div class="form-group">
                        <p>Nombre de usuario: <input type="text" class="form-control" id="userRegister" placeholder="Enter nombre usuario" name="nombre de usuario" required></p>
                        <div class="valid-feedback">Valido</div>
                        <div class="invalid-feedback">"Rellena nombre de usuario"</div>
                    </div>
                    <div class="form-group">
                        <p>Contraseña: <input type="password" class="form-control" id="passRegister" placeholder="Enter nombre usuario" name="nombre de usuario" required></p>
                        <div class="valid-feedback">Valido</div>
                        <div class="invalid-feedback">"Rellena nombre de usuario"</div>
                    </div>
                    <div class="form-group">
                        <p>Email: <input type="text" class="form-control" id="emailRegister" placeholder="Enter nombre usuario" name="nombre de usuario" required></p>
                        <div class="valid-feedback">Valido</div>
                        <div class="invalid-feedback">"Rellena nombre de usuario"</div>
                    </div>
                    <div class="form-group">
                        <p>País: <input type="text" class="form-control" id="paisRegister" placeholder="Enter nombre usuario" name="nombre de usuario" required></p>
                        <div class="valid-feedback">Valido</div>
                        <div class="invalid-feedback">"Rellena nombre de usuario"</div>
                    </div>
                  <button id="buttonGuardar" class="btn btn-info" data-dismiss="modal">Guardar</button>
                </div>
            </div>
          </div>
        </div>
      </div>
  </div>
</div>
<div class="col-sm-4"></div>
</body>
</html>