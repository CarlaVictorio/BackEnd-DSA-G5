<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>LogIn</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
       $(document).ready(function(){
          $('#buttonLogIn').click(function() {
            var dataBody=
            {
                nombre: $("#userLogIn").val(),
                password: $("#passLogIn").val(),
            }
            var URL = "/dsaApp/jugador/Login";
            $.post(
            {
                url: URL,
                data: JSON.stringify(dataBody),
                contentType: 'application/json; charset=utf-8'
            })
                .done(function(data, status){
                    var index = "index.html";
                    $(location).attr('href',index);
                })
                .fail(function(xhr, err){
                    alert("Usuario o contraseña incorrectos");
                    location.reload();
                })
          });
      });
      $(document).ready(function(){
          $('#buttonGuardar').click(function() {
            var dataBody=
            {
                nombre: $("#userRegister").val(),
                password: $("#passRegister").val(),
                email: $("#emailRegister").val(),
                pais: $("#paisRegister").val(),
            }
            var URL = "/dsaApp/jugador/Register";
            $.post(
            {
                url: URL,
                data: JSON.stringify(dataBody),
                contentType: 'application/json; charset=utf-8'
            })
                .done(function(data, status){
                    alert("Usuario registrado");
                    $("#userRegister").empty();
                    $("#passRegister").empty();
                })
                .fail(function(xhr, err){
                    alert("Assegurate de introducir todos los campos, si es así usuario o contraseña ya existente");
                })
          });
      });

    </script>
</head>
<body>
    <div class="jumbotron text-center">
      <h1>Cook with me</h1>
    </div>
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-4"></div>
        <div class="col-sm-4">
          <p>Nombre de usuario: <input type="text" id="userLogIn"></p>
          <p>Contrasenya: <input type="password" id="passLogIn"></p>
          <button id="buttonLogIn" class="btn btn-info" >Log In</button>
          <p>¿No estas registrado? Registrate </p>
          <button type="buttonRegister" class="btn btn-info" data-toggle="modal" data-target="#myModal">Register</button>
          <div class="modal fade" id="myModal">
            <div class="modal-dialog modal-xl">
              <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                  <h4 class="modal-title">Register</h4>
                  <button type="cerrar" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                  <p>Nombre de usuario: <input type="text" id="userRegister"></p>
                  <p>Contrasenya: <input type="password" id="passRegister"></p>
                  <p>Email: <input type="text" id="emailRegister"></p>
                  <p>País: <input type="text" id="paisRegister"></p>
                  <button id="buttonGuardar" class="btn btn-info" data-dismiss="modal">Guardar</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-4"></div>
      </div>
    </div>
</body>
</html>
